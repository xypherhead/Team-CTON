<!DOCTYPE html>
<html>

<head>
    <meta charset ="utf-8">
    <title>Personal Page CTON</title>
    <link rel="stylesheet" href="pstyles.css">        
</head>

<body style = "background-color: rgb(42,38,71);">
  <br>
    <div class = "spotify">
        <iframe id="iframe" title = "Playing your Playlist!" src ="https://open.spotify.com/embed/playlist/0vvXsWCC9xrXsKd4FyS8kM" width="300" height="200" frameborder="0" allowtransparency="true" allow="encrypted-media">
        </iframe>
        <form>
            <label for  ="url" >Paste your playlist link:</label><br>
            <input type ="text" id="url" name="url" >
            <br>
            <button id="splay" onclick="setURL()">PLAY</button>
        </form> 

        <script>
          
            function setURL(url){
              var str = document.getElementById("url").value;
              var res = str.slice(25);
              document.getElementById("iframe").src = "https://open.spotify.com/embed/" + res;
            }
        </script>  
    </div>
    
    <style>
        ul li {
       background: #cce5ff;
       padding: 10px;
      margin: 15px;
    }
    </style>
     
     
<div class="todo">

  <h1 id="title" style = " text-align: center; font-weight: 500; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;">Todo Tracker</h1>   

  <form>
    <input type="text" id="user-todo" placeholder="New Task" >
    <input type="date" id="user-date" >
    <input type="time" id="user-time" >
    <br><br>
    <button id="add">ADD EVENT</button>
  </form>

  <h2 id="todo-header"style = " text-align: center; font-weight: 500; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;">Todos</h2>
  
  <ul>

  </ul>

  <button id="clear">Clear All</button>

  <script>
    var form = document.querySelector('form');
    var todoList = document.querySelector('ul');
    var button = document.getElementById('clear');
    var addEvent = document.getElementById('add');
    var input = document.getElementById('user-todo');
    var day = document.getElementById('user-date');
    var time = document.getElementById('user-time');    
    var todosArray = localStorage.getItem('todos') ? JSON.parse(localStorage.getItem('todos')) : [];
    localStorage.setItem('todos', JSON.stringify(todosArray));
    var storage = JSON.parse(localStorage.getItem('todos'));


    form.addEventListener('submit', function (e) {
      e.preventDefault();      
    });
     addEvent.addEventListener('click', function() {
    
      todosArray.push("Event :".concat(input.value).concat("___Time:").concat(time.value).concat("___On:").concat(day.value) );
      
      localStorage.setItem('todos', JSON.stringify(todosArray));
      todoMaker("Event :".concat(input.value).concat("___Time:").concat(time.value).concat("___On: ").concat(day.value) );

      input.value = "";
      
    });

    var todoMaker = function(text) {
      var todo = document.createElement('li');
      todo.textContent = text;
      todoList.appendChild(todo);
    }
    for (var i = 0; i < storage.length; i++) {
      todoMaker(storage[i]);
    }
    button.addEventListener('click', function() {

      localStorage.clear();
      while (todoList.firstChild) {
        todoList.removeChild(todoList.firstChild);
      }
    })
      
  </script>

</div>

<div class = "apage">

    <a href="./acad.html">
      <input type="submit" value="Academic page"/>
     </a>
</div>

</body>

</html>
